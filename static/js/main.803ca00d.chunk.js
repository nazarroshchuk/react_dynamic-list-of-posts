(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,function(e,t,n){e.exports=n(16)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(3),r=n.n(o),s=n(1),u=(n(10),n(11),n(12),n(4)),l=n.n(u),i=function(e){var t=e.posts,n=(e.userId,e.fetchPostId),o=Object(a.useState)(""),r=Object(s.a)(o,2),u=r[0],i=r[1];return c.a.createElement("div",{className:"PostsList"},c.a.createElement("h2",null,"Posts:"," ",t.length),c.a.createElement("ul",{className:"PostsList"},t.map((function(e){return c.a.createElement("li",{key:e.id,className:"PostsList__item"},c.a.createElement("div",null,c.a.createElement("b",null,"[User #",e.userId,"]:"," "),e.title),c.a.createElement("button",{type:"button",className:l()("PostsList__button","button",{Active:e.id===u}),onClick:function(){return t=e.id===u?0:e.id,i(t),void n(t);var t}},e.id!==u?"Open":"Close"))}))))},m=(n(13),n(14),function(){return c.a.createElement("div",{className:"Loader"},c.a.createElement("div",{className:"Loader__content"}))}),f=function(e){var t=e.postId,n=e.onAddComment,o=Object(a.useState)(""),r=Object(s.a)(o,2),u=r[0],l=r[1],i=Object(a.useState)(""),f=Object(s.a)(i,2),p=f[0],d=f[1],b=Object(a.useState)(""),h=Object(s.a)(b,2),E=h[0],j=h[1],v=Object(a.useState)(!1),_=Object(s.a)(v,2),O=_[0],N=_[1];return c.a.createElement("form",{className:"NewCommentForm",onSubmit:function(e){e.preventDefault(),n({postId:t,name:u,email:p,body:E},N),l(""),d(""),j("")}},c.a.createElement("div",{className:"form-field"},c.a.createElement("input",{type:"text",name:"name",value:u,placeholder:"Your name",className:"NewCommentForm__input",onChange:function(e){l(e.target.value)},required:!0})),c.a.createElement("div",{className:"form-field"},c.a.createElement("input",{type:"text",name:"email",value:p,placeholder:"Your email",className:"NewCommentForm__input",onChange:function(e){d(e.target.value)},required:!0})),c.a.createElement("div",{className:"form-field"},c.a.createElement("textarea",{name:"body",value:E,placeholder:"Type comment here",className:"NewCommentForm__input",onChange:function(e){j(e.target.value)},required:!0})),O?c.a.createElement(m,null):c.a.createElement("button",{type:"submit",className:"NewCommentForm__submit-button button"},"Add a comment"))},p=(n(15),"https://mate-api.herokuapp.com/posts"),d="https://mate-api.herokuapp.com/comments";function b(){return fetch(p).then((function(e){return e.ok?e.json():Promise.reject(e)}))}var h=function(e){var t=e.postId,n=Object(a.useState)(null),o=Object(s.a)(n,2),r=o[0],u=o[1],l=Object(a.useState)(null),i=Object(s.a)(l,2),b=i[0],h=i[1],E=Object(a.useState)(!0),j=Object(s.a)(E,2),v=j[0],_=j[1],O=Object(a.useState)(!1),N=Object(s.a)(O,2),P=N[0],y=N[1],k=Object(a.useState)(null),C=Object(s.a)(k,2),S=C[0],g=C[1];Object(a.useEffect)((function(){y(!0),function(e){return fetch("".concat(p,"/").concat(e)).then((function(e){return e.ok?e.json():Promise.reject(e)}))}(t).then((function(e){u(e.data),y(!1)}))}),[t]),Object(a.useEffect)((function(){(function(e){return fetch(d).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(t){return t.data.filter((function(t){return t.postId===e}))}))})(t).then((function(e){return h(e)}))}),[S,t]);var I=function(){g(!S)},A=function(e){(function(e){var t="".concat(d,"/").concat(e);return fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject(e)}))})(e).then(I)};return c.a.createElement("div",{className:"PostDetails"},c.a.createElement("h2",null,"Post details:"),!P&&b&&r?c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:"PostDetails__post"},c.a.createElement("p",null,r.title)),c.a.createElement("section",{className:"PostDetails__comments"},c.a.createElement("button",{type:"button",className:"button",onClick:function(){_(!v)}},"Hide"," ",b.length," "," ","comments"),c.a.createElement("ul",{className:"PostDetails__list"},v&&b.map((function(e){return c.a.createElement("li",{key:e.id,className:"PostDetails__list-item"},c.a.createElement("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return A(e.id)}},"X"),c.a.createElement("p",null,e.body))}))))):c.a.createElement(m,null),c.a.createElement("section",null,c.a.createElement("div",{className:"PostDetails__form-wrapper"},c.a.createElement(f,{onAddComment:function(e,t){t(!0),function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("https://mate-api.herokuapp.com/comments",t).then((function(e){return e.ok?e.json():Promise.reject(e)}))}(e).then((function(e){t(!1),I()}))},postId:t,onUpdateComments:I}))))},E=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)([]),u=Object(s.a)(r,2),l=u[0],f=u[1],p=Object(a.useState)("0"),d=Object(s.a)(p,2),E=d[0],j=d[1],v=Object(a.useState)(!1),_=Object(s.a)(v,2),O=_[0],N=_[1],P=Object(a.useState)(0),y=Object(s.a)(P,2),k=y[0],C=y[1];Object(a.useEffect)((function(){N(!0),b().then((function(e){o(e.data),N(!1)})).catch((function(e){return e})),fetch("https://mate-api.herokuapp.com/users").then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(e){return f(e.data.filter((function(e){return e.id<=11})))})).catch((function(e){return e}))}),[0===+E]);var S=Object(a.useCallback)((function(e){var t=e.target.value;j(t),N(!0),b().then((function(e){o(e.data.filter((function(e){return e.userId===+t}))),N(!1)})).catch((function(e){return e}))}),[E]);return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App__header"},c.a.createElement("label",null,"Select a user: \xa0",c.a.createElement("select",{className:"App__user-selector",value:E,onChange:S},c.a.createElement("option",{value:"0"},"All users"),l.sort((function(e,t){return e.id-t.id})).map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)}))))),c.a.createElement("main",{className:"App__main"},c.a.createElement("div",{className:"App__sidebar"},O?c.a.createElement(m,null):c.a.createElement(i,{posts:n,userId:E,fetchPostId:C})),0!==k&&c.a.createElement("div",{className:"App__content"},c.a.createElement(h,{postId:k}))))};r.a.render(c.a.createElement(E,null),document.getElementById("root"))}],[[5,1,2]]]);
//# sourceMappingURL=main.803ca00d.chunk.js.map