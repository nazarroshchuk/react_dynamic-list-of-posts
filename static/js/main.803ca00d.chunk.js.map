{"version":3,"sources":["components/PostsList/PostsList.jsx","components/Loader/Loader.jsx","components/NewCommentForm/NewCommentForm.jsx","api/api.js","api/services.js","components/PostDetails/PostDetails.jsx","App.jsx","index.js"],"names":["PostsList","posts","fetchPostId","userId","useState","postId","setPostId","className","length","map","post","key","id","title","type","classNames","Active","onClick","postID","Loader","NewCommentForm","onAddComment","name","setName","email","setEmail","body","setBody","isLoad","setLoad","onSubmit","e","preventDefault","value","placeholder","onChange","target","required","POSTS_URL","COMMENTS_URL","getUsersPosts","fetch","then","response","ok","json","Promise","reject","PostDetails","postDetails","setPostDetails","comments","setComments","showComments","setShowComments","setIsLoad","isUpdateComments","setUpdateComments","useEffect","getPostDetails","data","filter","comment","getPostComments","onUpdateComments","onDeleteComment","url","method","headers","deleteComment","requestOptions","JSON","stringify","addComment","App","setPosts","users","setUsers","selectedUser","setSelectedUser","catch","err","user","onSelectUser","useCallback","sort","a","b","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.803ca00d.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport './PostsList.scss';\nimport classNames from 'classnames/bind';\n\nexport const PostsList = ({ posts, userId, fetchPostId }) => {\n  const [postId, setPostId] = useState('');\n\n  const onOpenHandler = (postID, userID) => {\n    setPostId(postID);\n    fetchPostId(postID);\n  };\n\n  return (\n    <div className=\"PostsList\">\n      <h2>\n        Posts:\n        {' '}\n        {posts.length}\n      </h2>\n\n      <ul className=\"PostsList\">\n        {posts.map(post => (\n          <li key={post.id} className=\"PostsList__item\">\n            <div>\n              <b>\n                [User #\n                {post.userId}\n                ]:\n                {' '}\n              </b>\n              {post.title}\n            </div>\n            <button\n              type=\"button\"\n              className={classNames(\n                'PostsList__button',\n                'button',\n                { Active: post.id === postId },\n              )}\n              onClick={() => onOpenHandler(post.id === postId ? 0 : post.id)}\n            >\n              {post.id !== postId ? 'Open' : 'Close'}\n            </button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nPostsList.propTypes = {\n  fetchPostId: PropTypes.func.isRequired,\n  userId: PropTypes.number.isRequired,\n  posts: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    title: PropTypes.string || null.isRequired,\n    userId: PropTypes.number.isRequired,\n  })).isRequired,\n};\n","import React from 'react';\nimport './Loader.scss';\n\nexport const Loader = () => (\n  <div className=\"Loader\">\n    <div className=\"Loader__content\" />\n  </div>\n);\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport './NewCommentForm.scss';\nimport { Loader } from '../Loader';\n\nexport const NewCommentForm = ({ postId, onAddComment }) => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [body, setBody] = useState('');\n  const [isLoad, setLoad] = useState(false);\n\n  const nameHandler = (e) => {\n    setName(e.target.value);\n  };\n\n  const emailHandler = (e) => {\n    setEmail(e.target.value);\n  };\n\n  const bodyHandler = (e) => {\n    setBody(e.target.value);\n  };\n\n  const submitComment = (e) => {\n    e.preventDefault();\n    const data = {\n      postId,\n      name,\n      email,\n      body,\n    };\n\n    onAddComment(data, setLoad);\n    setName('');\n    setEmail('');\n    setBody('');\n  };\n\n  return (\n    <form\n      className=\"NewCommentForm\"\n      onSubmit={submitComment}\n    >\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          value={name}\n          placeholder=\"Your name\"\n          className=\"NewCommentForm__input\"\n          onChange={nameHandler}\n          required\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"email\"\n          value={email}\n          placeholder=\"Your email\"\n          className=\"NewCommentForm__input\"\n          onChange={emailHandler}\n          required\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          value={body}\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n          onChange={bodyHandler}\n          required\n        />\n      </div>\n\n      {!isLoad\n        ? (\n          <button\n            type=\"submit\"\n            className=\"NewCommentForm__submit-button button\"\n          >\n            Add a comment\n          </button>\n        )\n        : <Loader />\n      }\n    </form>\n  );\n};\n\nNewCommentForm.propTypes = {\n  onAddComment: PropTypes.func.isRequired,\n  postId: PropTypes.number.isRequired,\n};\n","export const BASE_URL = 'https://mate-api.herokuapp.com';\nexport const USERS_URL = 'https://mate-api.herokuapp.com/users';\nexport const POSTS_URL = 'https://mate-api.herokuapp.com/posts';\nexport const COMMENTS_URL = 'https://mate-api.herokuapp.com/comments';\n","import { COMMENTS_URL, POSTS_URL, USERS_URL } from './api';\n\nexport function getUsersPosts() {\n  return fetch(POSTS_URL)\n    .then(response => (response.ok\n      ? response.json()\n      : Promise.reject(response)));\n}\n\nexport function getAllUsers() {\n  return fetch(USERS_URL)\n    .then(response => (response.ok\n      ? response.json()\n      : Promise.reject(response)));\n}\n\nexport function getPostDetails(postId) {\n  return fetch(`${POSTS_URL}/${postId}`)\n    .then(response => (response.ok\n      ? response.json()\n      : Promise.reject(response)));\n}\n\nexport function getPostComments(postId) {\n  return fetch(COMMENTS_URL)\n    .then(response => (response.ok\n      ? response.json()\n      : Promise.reject(response)))\n    .then(response => response.data\n      .filter(comment => comment.postId === postId));\n}\n\nexport function addComment(data) {\n  const url = COMMENTS_URL;\n  const requestOptions = {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(data),\n  };\n\n  return fetch(url, requestOptions)\n    .then(response => (response.ok\n      ? response.json()\n      : Promise.reject(response)));\n}\n\nexport function deleteComment(id) {\n  const url = `${COMMENTS_URL}/${id}`;\n  const requestOptions = {\n    method: 'DELETE',\n    headers: { 'Content-Type': 'application/json' },\n  };\n\n  return fetch(url, requestOptions)\n    .then(response => (response.ok\n      ? response.json()\n      : Promise.reject(response)));\n}\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { NewCommentForm } from '../NewCommentForm';\nimport './PostDetails.scss';\nimport {\n  addComment,\n  deleteComment,\n  getPostComments,\n  getPostDetails,\n} from '../../api/services';\nimport { Loader } from '../Loader';\n\nexport const PostDetails = ({ postId }) => {\n  const [postDetails, setPostDetails] = useState(null);\n  const [comments, setComments] = useState(null);\n  const [showComments, setShowComments] = useState(true);\n  const [isLoad, setIsLoad] = useState(false);\n  const [isUpdateComments, setUpdateComments] = useState(null);\n\n  useEffect(() => {\n    setIsLoad(true);\n    getPostDetails(postId)\n      .then((response) => {\n        setPostDetails(response.data);\n        setIsLoad(false);\n      });\n  }, [postId]);\n\n  useEffect(() => {\n    getPostComments(postId)\n      .then(response => setComments(response));\n  }, [isUpdateComments, postId]);\n\n  const onHideComments = () => {\n    setShowComments(!showComments);\n  };\n\n  const onUpdateComments = () => {\n    setUpdateComments(!isUpdateComments);\n  };\n\n  const onDeleteComment = (id) => {\n    deleteComment(id)\n      .then(onUpdateComments);\n  };\n\n  const onAddComment = (data, setLoad) => {\n    setLoad(true);\n    addComment(data)\n      .then((response) => {\n        setLoad(false);\n        onUpdateComments();\n      });\n  };\n\n  return (\n    <div className=\"PostDetails\">\n      <h2>Post details:</h2>\n\n      {!isLoad && comments && postDetails\n        ? (\n          <>\n            <section className=\"PostDetails__post\">\n              <p>{postDetails.title}</p>\n            </section>\n\n            <section className=\"PostDetails__comments\">\n              <button\n                type=\"button\"\n                className=\"button\"\n                onClick={onHideComments}\n              >\n                Hide\n                {' '}\n                {comments.length}\n                {' '}\n                {' '}\n                comments\n              </button>\n\n              <ul className=\"PostDetails__list\">\n                {showComments && comments.map(comment => (\n                  <li key={comment.id} className=\"PostDetails__list-item\">\n                    <button\n                      type=\"button\"\n                      className=\"PostDetails__remove-button button\"\n                      onClick={() => onDeleteComment(comment.id)}\n                    >\n                      X\n                    </button>\n                    <p>{comment.body}</p>\n                  </li>\n                ))}\n              </ul>\n            </section>\n          </>\n        )\n        : <Loader />\n      }\n\n      <section>\n        <div className=\"PostDetails__form-wrapper\">\n          <NewCommentForm\n            onAddComment={onAddComment}\n            postId={postId}\n            onUpdateComments={onUpdateComments}\n          />\n        </div>\n      </section>\n    </div>\n  );\n};\n\nPostDetails.propTypes = {\n  postId: PropTypes.number.isRequired,\n};\n","import React, { useCallback, useEffect, useState } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\nimport { getAllUsers, getUsersPosts } from './api/services';\nimport { Loader } from './components/Loader';\n\nconst App = () => {\n  const [posts, setPosts] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState('0');\n  const [isLoad, setIsLoad] = useState(false);\n  const [postId, setPostId] = useState(0);\n\n  useEffect(() => {\n    setIsLoad(true);\n    getUsersPosts('/posts')\n      .then((response) => {\n        setPosts(response.data);\n        setIsLoad(false);\n      })\n      .catch(err => err);\n\n    getAllUsers('/users')\n      .then(response => setUsers(response.data.filter(user => user.id <= 11)))\n      .catch(err => err);\n  }, [+selectedUser === 0]);\n\n  const onSelectUser = useCallback((e) => {\n    const userId = e.target.value;\n\n    setSelectedUser(userId);\n    setIsLoad(true);\n    getUsersPosts('/posts')\n      .then((response) => {\n        setPosts(response.data.filter(post => post.userId === +userId));\n        setIsLoad(false);\n      })\n      .catch(err => err);\n  }, [selectedUser]);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App__header\">\n        <label>\n          Select a user: &nbsp;\n\n          <select\n            className=\"App__user-selector\"\n            value={selectedUser}\n            onChange={onSelectUser}\n          >\n            <option value=\"0\">All users</option>\n            {users\n              .sort((a, b) => a.id - b.id)\n              .map(user => (\n                <option\n                  key={user.id}\n                  value={user.id}\n                >\n                  {user.name}\n                </option>\n              ))}\n          </select>\n        </label>\n      </header>\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          {!isLoad\n            ? (\n              <PostsList\n                posts={posts}\n                userId={selectedUser}\n                fetchPostId={setPostId}\n              />\n            )\n            : <Loader />\n          }\n        </div>\n\n        {postId !== 0\n          && (\n            <div className=\"App__content\">\n              <PostDetails\n                postId={postId}\n              />\n            </div>\n          )\n        }\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}